<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>mTouch Framework: Guard Ring / Shield</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="main.html">main</a>      </li>
      <li><a class="el" href="_framework_features.html">Features</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Guard Ring / Shield </h1>  </div>
</div>
<div class="contents">
<p>The framework is designed to output a synchronous signal on another pin to help maximize the sensitivity of the mTouch sensors. A guard ring is most effective when it encloses a sensor and shields it from any nearby communication traces, power planes (including ground), antennas, or other noise sources. The theory is that we want to decrease the voltage differential between the capacitive sensor and its environment.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>One guard ring can be shared among all sensors.</dd></dl>
<h2><a class="anchor" id="featGuard-How"></a>
How It Works</h2>
<p>Guard rings (or shields) are driven by an I/O or the DACOUT pin to minimize the amount of parasitic capacitance on the sensor. Parasitic capacitance will cause the field lines of the sensor to be distorted - pulling them down and decreasing the amount of sensitivity. With the guard ring, however, the sensor will be shielded from this effect.</p>
<div align="center">
<img src="guardLines.JPG" alt="guardLines.JPG"/>
<p><strong>Sensor Field Lines with and without a Guard Ring</strong></p></div>
 <h2><a class="anchor" id="featGuard-Config"></a>
Guard Ring / Shield Configuration</h2>
<p>There are two possible ways to implement the guard ring.</p>
<div align="center">
<img src="guardWaveform.JPG" alt="guardWaveform.JPG"/>
<p><strong>Two Guard Options and Their Behaviors</strong></p></div>
<p> To implement the blue line (maximum sensitivity gain), the DACOUT pin must be connected to the guard ring on your board. This is the easiest and most fine-tunable of the two options. </p>
<ol>
<li>
Open the <a class="el" href="m_touch__config__cvd_advanced_8h.html" title="Framework Configuration! Advanced CVD Scanning Options.">mTouch_config_cvdAdvanced.h</a> file and uncomment CVD_GUARD_DACOUT_ENABLED </li>
<li>
Define <a class="el" href="group___configuration.html#ga8d312687ea123215f9000ea1cc565609" title="If CVD_GUARD_DACOUT_ENABLED is defined, this determines what value is loaded into the DACCON0 registe...">CVD_GUARD_DACCON0_A</a> with the value of DACCON0 during the settling phase of the first sample. </li>
<li>
Define <a class="el" href="group___configuration.html#ga81a405075e1f225cb11400c4ab5e3353" title="If CVD_GUARD_DACOUT_ENABLED is defined, this determines what value is loaded into the DACCON1 registe...">CVD_GUARD_DACCON1_A</a> with the value of DACCON1 during the settling phase of the first sample. </li>
<li>
Define <a class="el" href="group___configuration.html#ga65d4facfc215a485976819f895888ff0" title="If CVD_GUARD_DACOUT_ENABLED is defined, this determines what value is loaded into the DACCON0 registe...">CVD_GUARD_DACCON0_B</a> with the value of DACCON0 during the settling phase of the second sample. </li>
<li>
Define <a class="el" href="group___configuration.html#ga6388f35cee7da7c1c99eb72aa5d5ccd5" title="If CVD_GUARD_DACOUT_ENABLED is defined, this determines what value is loaded into the DACCON1 registe...">CVD_GUARD_DACCON1_B</a> with the value of DACCON1 during the settling phase of the second sample. <div class="fragment"><pre class="fragment"><span class="preprocessor"> #define CVD_GUARD_DACOUT_ENABLED</span>
<span class="preprocessor"></span><span class="preprocessor"> #define CVD_GUARD_DACCON0_A     PIC_DACOUT_DACCON0_HALF_VDD    // Pre-defined value to set &#39;1/2 VDD&#39;</span>
<span class="preprocessor"></span><span class="preprocessor"> #define CVD_GUARD_DACCON1_A     PIC_DACOUT_DACCON1_HALF_VDD    // Pre-defined value to set &#39;1/2 VDD&#39;</span>
<span class="preprocessor"></span><span class="preprocessor"> #define CVD_GUARD_DACCON0_B     PIC_DACOUT_DACCON0_HALF_VDD    // Pre-defined value to set &#39;1/2 VDD&#39;</span>
<span class="preprocessor"> #define CVD_GUARD_DACCON1_B     PIC_DACOUT_DACCON1_HALF_VDD    // Pre-defined value to set &#39;1/2 VDD&#39;</span>
</pre></div> 'A' refers to the first half of the CVD scan when the external sensor is held low, the internal hold capacitor is charged high, and then they are connected. 'B' refers to the second half where the reverse is true. The settling voltage may be different for each of these, so different DACCON values may be required. </li>
</ol>
<p>To implement the red line, any I/O pin may be used. A large amount of series resistance should be added to the pin to lower the rise/fall time of the pin. The closer the rise/fall time of the I/O is able to match the rise/fall of the mTouch sensor, the better the result. Good typical starting value: 100K-200K ohms. </p>
<ol>
<li>
Open the <a class="el" href="m_touch__config__cvd_advanced_8h.html" title="Framework Configuration! Advanced CVD Scanning Options.">mTouch_config_cvdAdvanced.h</a> file and uncomment CVD_GUARD_IO_ENABLED </li>
<li>
Define <a class="el" href="group___configuration.html#gad419f3495b490e380dde081cb5f14459" title="If CVD_GUARD_IO_ENABLED is defined, this determines which port to use for the guard.">CVD_GUARD_PORT</a> with the LAT or PORT register for your output pin. </li>
<li>
Define <a class="el" href="group___configuration.html#gaade099d02396f9e5941fba96e12e2584" title="If CVD_GUARD_IO_ENABLED is defined, this determines which pin to use for the guard.">CVD_GUARD_PIN</a> with the LAT or PORT bit that will access the output pin. <div class="fragment"><pre class="fragment"><span class="preprocessor"> #define CVD_GUARD_IO_ENABLED</span>
<span class="preprocessor"></span><span class="preprocessor"> #define CVD_GUARD_PORT        LATA        // &lt;-- Guard ring is connected to RA2 / LATA2</span>
<span class="preprocessor"> #define CVD_GUARD_PIN         2           </span>
</pre></div> </li>
</ol>
</div>
<hr class="footer"/><address class="footer"><small>mTouch Framework v2.1 documentation by&#160;
<a href="http://www.microchip.com"> 
<img class="footer" src="../includes/mchp.jpeg" alt="Click here to visit our website at www.microchip.com"/></a></small></address> 
</body> 
</html> 
