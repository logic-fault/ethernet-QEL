<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>mTouch Framework: Loading new firmware on the PICKit Serial Analyzer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="main.html">main</a>      </li>
      <li><a class="el" href="_getting_started.html">Getting Started</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Loading new firmware on the PICKit Serial Analyzer </h1>  </div>
</div>
<div class="contents">
<h2><a class="anchor" id="Intro"></a>
Introduction</h2>
<p>The PICKit Serial Analyzer (PKSA) is an easy way to connect the UART of your PIC&reg; microcontroller to your PC. All of the required steps are handled by the PICKit Serial Loader Utility provided with the framework in the 'Utilities' folder of the demos.</p>
<p><code>Your MLA Directory/mTouchCapDemos/Utilities/PIC12F PIC16F Utilities/PICKit Serial Loader</code></p>
<p>There are two different ways the PKSA can be used: </p>
<ul>
<li><b>UART-to-USB converter</b> :: UART_USB_PICKitSerial_V1.40.hex :: PKSA behaves as a COM port when connected to the PC. </li>
<li><b>Default PKSA Behavior</b> :: PKS-0307-WITHBOOT-0103.HEX :: PKSA behaves as an HID device that is manipulated through a DLL.</li>
</ul>
<p>An update to the default PKSA hex file is provided to add support for the RS-232 'break' character. This is required for communicating with the mTouch two-way GUI.</p>
<h2><a class="anchor" id="Convert"></a>
Changing the PICKit Serial Analyzer's Hex File</h2>
<ol>
<li>
Press the button on the PICKit Serial Analyzer when connecting to PC's USB to enter <code>Bootloader Mode</code>.<br/>
 (The 'Target' and 'Busy' LEDs should be flashing quickly.) </li>
<li>
Open the PICKit Serial Loader Utility provided by the framework in the Utilities folder of the demos. </li>
<li>
Follow the on-screen instructions to load the new hex file. Hex files and drivers are provided in the same folder as the loader utility. Make sure to select correct hex file depending on the desired behavior (UART-to-USB COM port / Updated Default PKSA). </li>
</ol>
<h2><a class="anchor" id="Use"></a>
Using your PICKit Serial as a UART-to-USB Converter</h2>
<ol>
<li>
Unplug and replug the PKSA. Press and hold the black PKSA button to toggle the on-board 5V power supply. <ul>
<li>
Warning: There is no protection provided on this power supply. Maximum current is 20mA. </li>
</ul>
</li>
<li>
LED Status Legend: <ul>
<li>
Target LED On: Transmission in progress </li>
<li>
Busy LED On: Reception was successful </li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="UseNormal"></a>
Using your PICKit Serial with the default PKSA firmware</h2>
<ol>
<li>
Power your mTouch board and connect the PKSA. </li>
<li>
Open the mTouch Two-Way GUI. The program will begin communicating or will provide error messages with suggestions for resolve any issues. </li>
</ol>
<div align="center">
<img src="pksaExtVdd.JPG" alt="pksaExtVdd.JPG"/>
<p><strong>Example schematic connecting the PKSA with an external power supply</strong></p></div>
 <div align="center">
<img src="pksaVdd.JPG" alt="pksaVdd.JPG"/>
<p><strong>Example schematic of PKSA supplying power to the board</strong></p></div>
 <div align="center">
<img src="pksaExt5Vdd.JPG" alt="pksaExt5Vdd.JPG"/>
<p><strong>Example schematic of connecting PKSA with an external 5V power supply. Notice - no VDD connection required.</strong></p></div>
<p> <b>Maximum Speed</b>: 115.2 kbps<br/>
 <b>Voltage Level</b>: Depends on the voltage applied to pin #2. Valid range is from 3-5V.<br/>
 Optional 5V (&lt;20mA) power supply from the PICKit Serial Analyzer.<br/>
</p>
<h2><a class="anchor" id="Pinout"></a>
PICKit Serial Analyzer Pin Configuration</h2>
<ol>
<li>
The PC's TX line. The PIC's RX line. (Marked with an arrow) </li>
<li>
V<sub>DD</sub> : 3-5V </li>
<li>
V<sub>SS</sub> </li>
<li>
Aux1 : not used in RS232 configuration </li>
<li>
Aux2 : not used in RS232 configuration </li>
<li>
The PC's RX line. The PIC's TX line. </li>
</ol>
<div align="center">
<img src="pksaPins.JPG" alt="pksaPins.JPG"/>
</div>
 </div>
<hr class="footer"/><address class="footer"><small>mTouch Framework v2.1 documentation by&#160;
<a href="http://www.microchip.com"> 
<img class="footer" src="../includes/mchp.jpeg" alt="Click here to visit our website at www.microchip.com"/></a></small></address> 
</body> 
</html> 
